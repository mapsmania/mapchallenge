<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Literal Map of America</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet" />
<script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
<style>
  body { margin: 0; padding: 0; }
  #map { width: 100vw; height: 100vh; }
</style>
</head>

<body>
<div id="map"></div>

<script>
// -------------------------
// Initialize map
// -------------------------
const map = new maplibregl.Map({
    style: "https://mapsmania.github.io/mapchallenge/data/romanstyle.json",
    center: [-98.5, 39.8],
    zoom: 4,
    container: "map",
    attributionControl: false
});

// -------------------------
// State meanings GeoJSON
// -------------------------
const stateMeanings = {
  "type": "FeatureCollection",
  "features": [
    {"type":"Feature","properties":{"name":"Alabama","meaning":"Vegetation Gatherers"},"geometry":{"type":"Point","coordinates":[-86.8,32.8]}},
    {"type":"Feature","properties":{"name":"Alaska","meaning":"The Great Land"},"geometry":{"type":"Point","coordinates":[-152.4,64.2]}},
    {"type":"Feature","properties":{"name":"Arizona","meaning":"Place Of The Little Spring"},"geometry":{"type":"Point","coordinates":[-111.7,34.1]}},
    {"type":"Feature","properties":{"name":"Arkansas","meaning":"Downstream People"},"geometry":{"type":"Point","coordinates":[-92.4,35.1]}},
    {"type":"Feature","properties":{"name":"California","meaning":"Land Of Queen Calafia"},"geometry":{"type":"Point","coordinates":[-119.5,37.2]}},
    {"type":"Feature","properties":{"name":"Colorado","meaning":"Colored Red"},"geometry":{"type":"Point","coordinates":[-105.5,38.9]}},
    {"type":"Feature","properties":{"name":"Connecticut","meaning":"Long Tidal River"},"geometry":{"type":"Point","coordinates":[-72.7,41.6]}},
    {"type":"Feature","properties":{"name":"Delaware","meaning":"Of The War (Uncertain)"},"geometry":{"type":"Point","coordinates":[-75.5,39.1]}},
    {"type":"Feature","properties":{"name":"Florida","meaning":"Flowery / Full Of Flowers"},"geometry":{"type":"Point","coordinates":[-81.5,27.7]}},
    {"type":"Feature","properties":{"name":"Georgia","meaning":"Land Of George"},"geometry":{"type":"Point","coordinates":[-83.4,32.6]}},
    {"type":"Feature","properties":{"name":"Hawaii","meaning":"Homeland / Place Of The Gods"},"geometry":{"type":"Point","coordinates":[-155.5,20.6]}},
    {"type":"Feature","properties":{"name":"Idaho","meaning":"Gem Of The Mountains (Uncertain)"},"geometry":{"type":"Point","coordinates":[-114.0,44.2]}},
    {"type":"Feature","properties":{"name":"Illinois","meaning":"The People"},"geometry":{"type":"Point","coordinates":[-89.3,40.0]}},
    {"type":"Feature","properties":{"name":"Indiana","meaning":"Land Of The Indians"},"geometry":{"type":"Point","coordinates":[-86.1,40.2]}},
    {"type":"Feature","properties":{"name":"Iowa","meaning":"Beautiful Land / Sleepy Ones"},"geometry":{"type":"Point","coordinates":[-93.5,42.0]}},
    {"type":"Feature","properties":{"name":"Kansas","meaning":"People Of The South Wind"},"geometry":{"type":"Point","coordinates":[-98.5,38.5]}},
    {"type":"Feature","properties":{"name":"Kentucky","meaning":"Meadow / Prairie"},"geometry":{"type":"Point","coordinates":[-85.3,37.5]}},
    {"type":"Feature","properties":{"name":"Louisiana","meaning":"Land Of Louis"},"geometry":{"type":"Point","coordinates":[-92.0,30.9]}},
    {"type":"Feature","properties":{"name":"Maine","meaning":"Mainland"},"geometry":{"type":"Point","coordinates":[-69.0,45.2]}},
    {"type":"Feature","properties":{"name":"Maryland","meaning":"Land Of Mary"},"geometry":{"type":"Point","coordinates":[-76.7,39.1]}},
    {"type":"Feature","properties":{"name":"Massachusetts","meaning":"At The Great Hill"},"geometry":{"type":"Point","coordinates":[-71.8,42.3]}},
    {"type":"Feature","properties":{"name":"Michigan","meaning":"Big Water"},"geometry":{"type":"Point","coordinates":[-85.0,44.4]}},
    {"type":"Feature","properties":{"name":"Minnesota","meaning":"Cloudy Water"},"geometry":{"type":"Point","coordinates":[-94.3,46.4]}},
    {"type":"Feature","properties":{"name":"Mississippi","meaning":"Big River"},"geometry":{"type":"Point","coordinates":[-89.7,32.9]}},
    {"type":"Feature","properties":{"name":"Missouri","meaning":"People Of The Big Canoe"},"geometry":{"type":"Point","coordinates":[-92.6,38.3]}},
    {"type":"Feature","properties":{"name":"Montana","meaning":"Mountainous"},"geometry":{"type":"Point","coordinates":[-110.3,46.9]}},
    {"type":"Feature","properties":{"name":"Nebraska","meaning":"Flat Water"},"geometry":{"type":"Point","coordinates":[-99.9,41.5]}},
    {"type":"Feature","properties":{"name":"Nevada","meaning":"Snow-Covered"},"geometry":{"type":"Point","coordinates":[-116.6,39.4]}},
    {"type":"Feature","properties":{"name":"New Hampshire","meaning":"Named For Hampshire, England"},"geometry":{"type":"Point","coordinates":[-71.5,43.9]}},
    {"type":"Feature","properties":{"name":"New Jersey","meaning":"Named After Jersey Island"},"geometry":{"type":"Point","coordinates":[-74.5,40.1]}},
    {"type":"Feature","properties":{"name":"New Mexico","meaning":"New Land Of The Mexica"},"geometry":{"type":"Point","coordinates":[-106.1,34.3]}},
    {"type":"Feature","properties":{"name":"New York","meaning":"Land Of York"},"geometry":{"type":"Point","coordinates":[-75.5,43.0]}},
    {"type":"Feature","properties":{"name":"North Carolina","meaning":"Land Of Charles"},"geometry":{"type":"Point","coordinates":[-79.0,35.6]}},
    {"type":"Feature","properties":{"name":"North Dakota","meaning":"Friend / Ally"},"geometry":{"type":"Point","coordinates":[-99.8,47.5]}},
    {"type":"Feature","properties":{"name":"Ohio","meaning":"Beautiful River"},"geometry":{"type":"Point","coordinates":[-82.8,40.3]}},
    {"type":"Feature","properties":{"name":"Oklahoma","meaning":"Red People"},"geometry":{"type":"Point","coordinates":[-97.5,35.4]}},
    {"type":"Feature","properties":{"name":"Oregon","meaning":"Beautiful"},"geometry":{"type":"Point","coordinates":[-120.6,44.2]}},
    {"type":"Feature","properties":{"name":"Pennsylvania","meaning":"Penn's Woods"},"geometry":{"type":"Point","coordinates":[-77.6,40.9]}},
    {"type":"Feature","properties":{"name":"Rhode Island","meaning":"Red Island (Possibly)"},"geometry":{"type":"Point","coordinates":[-71.6,41.6]}},
    {"type":"Feature","properties":{"name":"South Carolina","meaning":"Land Of Charles"},"geometry":{"type":"Point","coordinates":[-80.9,33.8]}},
    {"type":"Feature","properties":{"name":"South Dakota","meaning":"Friend / Ally"},"geometry":{"type":"Point","coordinates":[-100.0,44.4]}},
    {"type":"Feature","properties":{"name":"Tennessee","meaning":"Meeting Place / River Bend"},"geometry":{"type":"Point","coordinates":[-86.3,35.8]}},
    {"type":"Feature","properties":{"name":"Texas","meaning":"Friends"},"geometry":{"type":"Point","coordinates":[-99.3,31.0]}},
    {"type":"Feature","properties":{"name":"Utah","meaning":"People Of The Mountains"},"geometry":{"type":"Point","coordinates":[-111.7,39.4]}},
    {"type":"Feature","properties":{"name":"Vermont","meaning":"Green Mountain"},"geometry":{"type":"Point","coordinates":[-72.7,44.1]}},
    {"type":"Feature","properties":{"name":"Virginia","meaning":"Land Of The Virgin"},"geometry":{"type":"Point","coordinates":[-78.3,37.5]}},
    {"type":"Feature","properties":{"name":"Washington","meaning":"Estate Of Wassa's People"},"geometry":{"type":"Point","coordinates":[-120.5,47.4]}},
    {"type":"Feature","properties":{"name":"West Virginia","meaning":"Land Of The Virgin"},"geometry":{"type":"Point","coordinates":[-80.6,38.8]}},
    {"type":"Feature","properties":{"name":"Wisconsin","meaning":"River Running Through A Red Place"},"geometry":{"type":"Point","coordinates":[-89.9,44.6]}},
    {"type":"Feature","properties":{"name":"Wyoming","meaning":"Large Plains"},"geometry":{"type":"Point","coordinates":[-107.3,43.0]}}
  ]
};

// Store original meanings
stateMeanings.features.forEach(f => {
    f.properties.originalMeaning = f.properties.meaning;
});

// -------------------------
// Map load
// -------------------------
map.on("load", () => {
    // Add state boundaries
    map.addSource("state-boundaries", {
        type: "geojson",
        data: "https://mapsmania.github.io/mapchallenge/data/states.json"
    });

    // Fill layer for hover detection (invisible)
    map.addLayer({
        id: "state-boundary-fill-hover",
        type: "fill",
        source: "state-boundaries",
        paint: { "fill-opacity": 0 }
    });

    // Outline
    map.addLayer({
        id: "state-boundary-line",
        type: "line",
        source: "state-boundaries",
        paint: { "line-color": "#ccc", "line-width": 1.5 }
    });

    // Highlight layer
    map.addLayer({
        id: "state-boundary-fill-highlight",
        type: "fill",
        source: "state-boundaries",
        paint: { "fill-color": "#f39c12", "fill-opacity": 0.2 },
        filter: ["==", "NAME", ""]
    });

    // Add state labels
    map.addSource("stateMeanings", {
        type: "geojson",
        data: stateMeanings
    });

    map.addLayer({
        id: "state-meaning-labels",
        type: "symbol",
        source: "stateMeanings",
        layout: {
            "text-field": ["get", "meaning"],
            "text-font": ["Noto Sans Bold"],
            "text-max-width": 3.25,
            "text-size": ["interpolate", ["linear"], ["zoom"], 1, 8, 4, 15]
        },
        paint: {
            "text-color": "#000",
            "text-halo-blur": 1,
            "text-halo-color": "#fff",
            "text-halo-width": 1
        }
    });

    // -------------------------
    // Hover interaction
    // -------------------------
    map.on("mousemove", "state-boundary-fill-hover", (e) => {
        if (!e.features.length) return;
        const stateName = e.features[0].properties.NAME;

        // Highlight polygon
        map.setFilter("state-boundary-fill-highlight", ["==", "NAME", stateName]);
        map.getCanvas().style.cursor = "pointer";

        // Update only hovered label
        stateMeanings.features.forEach(f => {
            f.properties.meaning = (f.properties.name === stateName) ? f.properties.name : f.properties.originalMeaning;
        });
        map.getSource("stateMeanings").setData(stateMeanings);
    });

    map.on("mouseleave", "state-boundary-fill-hover", () => {
        map.setFilter("state-boundary-fill-highlight", ["==", "NAME", ""]);
        map.getCanvas().style.cursor = "";

        // Restore all meanings
        stateMeanings.features.forEach(f => f.properties.meaning = f.properties.originalMeaning);
        map.getSource("stateMeanings").setData(stateMeanings);
    });
});
</script>
</body>
</html>
