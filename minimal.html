<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Minimal London</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    href="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.css"
    rel="stylesheet"
  />
  <script src="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.js"></script>
  <style>
    body, html { margin: 0; padding: 0; height: 100%; background: #000; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
   #london-label {
  position: absolute;
  bottom: 20px;
  right: 20px;
  color: #fff;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 15vw;       /* scales with viewport width */
  line-height: 1;
  pointer-events: none;
  user-select: none;
}

  </style>
</head>
<body>
  <div id="map"></div>
  <div id="london-label">LDN</div>

  <script>
    // Create the map with no basemap or style layers
    const map = new maplibregl.Map({
      container: 'map',
      style: {
        version: 8,
        sources: {},
        layers: [],
        glyphs: 'https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf'
      },
      center: [-0.1, 51.5],  // approximate London center
      zoom: 11
    });

   
    map.on('load', () => {
      // Add GeoJSON source
      map.addSource('london', {
        type: 'geojson',
        data: 'data/miles.geojson'
      });

   // --- River Thames ---
map.addLayer({
  id: 'thames',
  type: 'line',
  source: 'london',
  paint: {
    'line-color': '#0077cc',
    'line-width': 14
  },
  filter: ['==', ['get', 'name'], 'River Thames']  // river features only
});

// --- Bridges ---
map.addLayer({
  id: 'bridges',
  type: 'line',
  source: 'london',
  paint: {
    'line-color': '#fff',
    'line-width': 1.5
  },
  filter: ['==', ['get', 'name'], 'bridge']  // bridge features only
});



      // Adjust view to fit all features
      const bounds = new maplibregl.LngLatBounds();
      fetch('data/miles.geojson')
        .then(resp => resp.json())
        .then(data => {
          data.features.forEach(f => {
            const coords = f.geometry.coordinates.flat(Infinity);
            for (let i = 0; i < coords.length; i += 2) {
              bounds.extend([coords[i], coords[i + 1]]);
            }
          });
          map.fitBounds(bounds, { padding: 40 });
        });
    });
  </script>
</body>
</html>
